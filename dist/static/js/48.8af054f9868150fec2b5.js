webpackJsonp([48],{WFzu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Nf9k"),n=(a("XLwt"),a("mtWM"),{name:"check_page1",data:function(){return{selectedOptions:"",options:[],name:"",urls:"",fileUrl:"",msg:"将数据导入数据库",file:"",active:1}},components:{},methods:{getDataList:function(){var t=this;i.a.req({apiName:"wenjiangmingcheng_tuisong"}).then(function(e){if((e=e.data)&&"200"===e.code){var a=e.data;t.options=a}}).catch(function(t){console.log(t)})},handleChange:function(t){var e=void 0;t.length>0&&(e=t[t.length-1]);var a=e.split("/");a=a[a.length-1],this.urls=a,this.name=e},download:function(){var t=this,e=this.urls,a=this.name;a?i.a.req({apiName:"wenjiang_tuisong",responseType:"blob",data:{value:a}}).then(function(a){var i=a.data;if(i){var n=window.URL.createObjectURL(new Blob([i])),l=document.createElement("a");l.style.display="none",l.href=n,l.setAttribute("download",e),document.body.appendChild(l),l.click(),t.active=2}}).catch(function(t){console.log(t)}):alert("请先选择要下载的模板文件")},onload:function(){},beforeAvatarUpload:function(t){console.log(t),this.file=t,this.fileUrl=t.name},submit:function(){if(""===this.file)alert("请先上传文档");else{var t=new FormData;t.append("file",this.file),t.append("type1","审计报告模板"),t.append("type2","审计报告模板"),t.append("type3","审计报告模板"),t.append("file",this.file),console.log(t);this.$axios.post("http://121.42.29.188:10000/file_text",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if((t=t.data)&&"200"===t.code){var e=t.data;console.log(e),alert("提交成功")}}).catch(function(t){alert("提交成功")})}}},mounted:function(){this.getDataList()}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"check_page1"},[a("div",{staticClass:"cont"},[a("div",{staticClass:"progress"},[a("el-steps",{attrs:{direction:"vertical",active:t.active}},[a("el-step",{attrs:{title:"下载文件"}}),t._v(" "),a("el-step",{attrs:{title:"修改文件"}}),t._v(" "),a("el-step",{attrs:{title:"上传文件"}})],1)],1),t._v(" "),a("div",{staticClass:"content_right",staticStyle:{"text-align":"center","line-height":"60px"}},[1===t.active?a("div",{staticStyle:{"margin-top":"200px"}},[a("el-cascader",{attrs:{placeholder:"请选择审计报告模板","expand-trigger":"hover",options:t.options,"show-all-levels":!1},on:{change:t.handleChange},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}}),a("br"),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.download}},[t._v("点击下载文件")])],1):t._e(),t._v(" "),2===t.active?a("div",[a("p",{staticStyle:{"margin-top":"200px","text-align":"center","font-size":"18px"}},[t._v("\n\t\t\t\t\t文件下载完成，请点击左下角打开已下载的文件\n\t\t\t\t")]),t._v(" "),a("el-row",[a("el-button",{attrs:{type:"default",plain:""},on:{click:function(e){t.active=1}}},[t._v("上一步")]),t._v(" "),a("el-button",{attrs:{type:"default",plain:""},on:{click:function(e){t.active=3}}},[t._v("下一步")])],1)],1):t._e(),t._v(" "),3===t.active?a("div",{staticClass:"upload-demo",staticStyle:{"margin-top":"130px"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","http-request":t.onload,"show-file-list":!1,"before-upload":t.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text",staticStyle:{"line-height":"30px"}},[a("div",[t._v(t._s(t.fileUrl))]),t._v(" "),a("div",[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])]),t._v(" "),a("div",{staticClass:"el-upload__tip"},[t._v(t._s(t.msg))]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.submit}},[t._v("点击将文件上传至服务器")]),t._v(" "),a("el-button",{attrs:{type:"default",plain:""},on:{click:function(e){t.active=1}}},[t._v("返回第一步")])],1):t._e()])])])},staticRenderFns:[]};var o=a("VU/8")(n,l,!1,function(t){a("n9M8")},"data-v-66a45445",null);e.default=o.exports},n9M8:function(t,e){}});
//# sourceMappingURL=48.8af054f9868150fec2b5.js.map